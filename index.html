<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Archive Grid</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0f172a;
  color:#fff;
}

h1{
  text-align:center;
  padding:20px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(300px, 1fr));
  gap:20px;
  padding:20px;
  justify-content: center;
}

.card{
  background:#1e293b;
  border-radius:12px;
  padding:15px;
  box-shadow:0 6px 20px rgba(0,0,0,.4);
  display: flex;
  flex-direction: column;
  transition: transform 0.3s ease;
}

.card:hover {
  transform: translateY(-5px);
}

.card img {
  width: 100%;        /* Fill card width */
  height: auto;       /* Scale height automatically */
  object-fit: contain; /* Keep full image visible */
  border-radius:8px;
  border:none;
  transition: transform 0.3s ease;
  max-height: 500px;  /* Prevents extremely tall images */
}

.card img:hover {
  transform: scale(1.03);
}

.title{
  font-weight:bold;
  margin-top:12px;
  font-size: 18px;
}

.details{
  font-size:14px;
  opacity:.8;
  margin-top: 6px;
}

.actions{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-top:12px;
}

button{
  background:#10b981;
  border:none;
  padding:10px 16px;
  border-radius:6px;
  cursor:pointer;
  color:#000;
  font-weight:bold;
  font-size: 16px;
}

.share{
  cursor:pointer;
  font-size:20px;
}

.fullscreen-icon {
  cursor: pointer;
  font-size: 20px;
  color: #38bdf8;
  margin-right: 12px;
}

.home-link {
  position: fixed;
  top: 20px;
  left: 20px;
  font-size: 24px;
  cursor: pointer;
  z-index: 1000;
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  text-decoration: none;
  color: #fff;
}

.back-link {
  position: fixed;
  top: 20px;
  right: 20px;
  font-size: 24px;
  cursor: pointer;
  z-index: 1000;
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  text-decoration: none;
  color: #fff;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .grid {
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 15px;
  }
}
</style>
</head>

<body>
  <a href="https://yan-shun-081.github.io/yan-1-website.com/" class="home-link">üè†</a>
  <a href="javascript:history.back()" class="back-link">‚Üê</a>

<h1>üéÆ GameVault</h1>
<div class="grid" id="grid"></div>

<script>
const DATA_URL = "data1.json";
const BASE_GAME_PAGE = "https://page-2.github.io/yan-1-website-games-page/gl1.html";

// Open folder
function openFolder(folder){
  window.location.href = folder + "/";
}

// Share link
function shareItem(folder, id){
  const link = `${BASE_GAME_PAGE}?id=${id}`;
  const text = `Check out and play ${folder} ${link}`;

  if(navigator.share){
    navigator.share({ text, url: link });
  }else{
    navigator.clipboard.writeText(text);
    alert("Link copied to clipboard");
  }
}

// Open fullscreen embed
function openFullscreen(imageUrl) {
  const container = document.createElement('div');
  container.style.position = 'fixed';
  container.style.top = '0';
  container.style.left = '0';
  container.style.width = '100%';
  container.style.height = '100%';
  container.style.backgroundColor = '#000';
  container.style.zIndex = '9999';
  container.style.display = 'flex';
  container.style.alignItems = 'center';
  container.style.justifyContent = 'center';

  const img = document.createElement('img');
  img.src = imageUrl;
  img.style.maxWidth = '90vw';
  img.style.maxHeight = '90vh';
  img.style.borderRadius = '8px';

  const closeBtn = document.createElement('button');
  closeBtn.innerText = '‚úï';
  closeBtn.style.position = 'absolute';
  closeBtn.style.top = '20px';
  closeBtn.style.right = '20px';
  closeBtn.style.background = 'rgba(255, 255, 255, 0.2)';
  closeBtn.style.color = 'white';
  closeBtn.style.border = 'none';
  closeBtn.style.width = '40px';
  closeBtn.style.height = '40px';
  closeBtn.style.borderRadius = '50%';
  closeBtn.style.fontSize = '20px';
  closeBtn.style.cursor = 'pointer';
  closeBtn.style.zIndex = '10000';

  closeBtn.onclick = () => {
    document.body.removeChild(container);
  };

  container.appendChild(img);
  container.appendChild(closeBtn);
  document.body.appendChild(container);
}

// Load grid
fetch(DATA_URL)
.then(r=>r.json())
.then(data=>{
  const grid = document.getElementById("grid");

  data.forEach(item=>{
    const card = document.createElement("div");
    card.className = "card";
    card.id = "item-"+item.id;

    const img = document.createElement("img");
    img.src = item.archive_image_url;
    img.alt = item.folder;

    const title = document.createElement("div");
    title.className = "title";
    title.textContent = item.folder;

    const details = document.createElement("div");
    details.className = "details";
    details.textContent = item.details;

    const idDiv = document.createElement("div");
    idDiv.className = "details";
    idDiv.textContent = "ID: " + item.id;

    const actions = document.createElement("div");
    actions.className = "actions";
    actions.innerHTML = `
      <button onclick="openFolder('${item.folder}')">Play</button>
      <div>
        <span class="fullscreen-icon" onclick="openFullscreen('${item.archive_image_url}')">‚õ∂</span>
        <span class="share" onclick="shareItem('${item.folder}','${item.id}')">·Øì‚û§</span>
      </div>
    `;

    card.appendChild(img);
    card.appendChild(title);
    card.appendChild(details);
    card.appendChild(idDiv);
    card.appendChild(actions);
    grid.appendChild(card);

    // No height adjustment needed - cards will naturally expand with content
  });

  handleDeepLink(data);
});

// Handle ?id=
function handleDeepLink(data){
  const params = new URLSearchParams(window.location.search);
  const id = params.get("id");
  if(!id) return;

  const item = data.find(i=>i.id===id);
  if(item){
    setTimeout(()=>openFolder(item.folder),500);
  }
}
</script>

</body>
</html>
